

              СИСТЕМА КОМАНД МИКРОПРОЦЕССОРА Z80.


   Группа команд информационного обмена, пересылки блока и поиска

-----------------------------------------------------------------------------------
МНЕМОНИКА !СИМВОЛИЧЕСК.!   ФЛАГИ   !    КОД  !ДЛИНА !ЧИСЛО !ЧИСЛО ! ПРИМЕЧАНИЕ
          !  ОПИСАНИЕ  !           !ОПЕРАЦИИ !  В   !МАШИН.!ТАКТОВ!
          !            !-----------!---------!БАЙТАХ!ЦИКЛОВ!      !
          !            ! ! !P! ! ! !         !      !      !      !
          !            !C!Z!V!S!N!H!7654 3210!      !      !      !
----------!------------!-----------!---------!------!------!------!----------------
EX DE,HL  ! DE<>HL     !. . . . . .!1110 1011!  1   !  1   !  4   !
EX AF,AF' ! AF<>AF'    !. . . . . .!0000 1000!  1   !  1   !  4   !
EXX       !!BC!  !BC'! !. . . . . .!1101 1001!  1   !  1   !  4   !Обмен содержимым
          !!DE!<>!DE'! !           !         !      !      !      !основного и
          !!HL!  !HL'! !           !         !      !      !      !дополнительного
          !            !           !         !      !      !      !блоков регистров
EX (SP),HL! H<>(SP+1)  !. . . . . .!1110 0011!  1   !  5   !  19  !
          ! L<>(SP)    !           !         !      !      !      !
EX (SP),IX! IXh<>(SP+1)!. . . . . .!1101 1101!  2   !  6   !  23  !
          ! IXl<>(SP)  !           !1110 0011!      !      !      !
EX (SP),IY! IYh<>(SP+1)!. . . . . .!1111 1101!  2   !  6   !  23  !
          ! IYl<>(SP)  !           !1110 0011!      !      !      !
          !            !    1      !         !      !      !      !
  LDI     ! (DE)<(HL)  !. . * . 0 0!1110 1101!  2   !  4   !  16  !Загрузить (HL)
          ! DE<DE+1    !           !1010 0000!      !      !      !в (DE) увеличить
          ! HL<HL+1    !           !         !      !      !      !на 1 указатели и
          ! BC<BC-1    !           !         !      !      !      !уменьшить на 1
          !            !           !         !      !      !      !счетчик числа
          !            !           !         !      !      !      !байтов (BC)
  LDIR    ! (DE)<(HL)  !. . 0 . 0 0!1110 1101!  2   !  5   !  21  !Если (BC)=/0
          ! DE<DE+1    !           !1011 0000!  2   !  4   !  16  !Если (BC)=0
          ! HL<HL+1    !           !         !      !      !      !
          ! BC<BC-1    !           !         !      !      !      !
          ! Повторяется!           !         !      !      !      !
          ! пока BC=0  !           !         !      !      !      !
          !            !    1      !         !      !      !      !
  LDD     ! (DE)<(HL)  !. . * . 0 0!1110 1101!  2   !  4   !  16  !
          ! DE<DE-1    !           !1010 1000!      !      !      !
          ! HL<HL-1    !           !         !      !      !      !
          ! BC<BC-1    !           !         !      !      !      !
  LDDR    ! (DE)<(HL)  !. . 0 . 0 0!1110 1101!  2   !  5   !  21  !Если(BC)=/0
          ! DE<DE-1    !           !1011 1000!  2   !  4   !  16  !Если(BC)=0
          ! HL<HL-1    !           !         !      !      !      !
          ! BC<BC-1    !           !         !      !      !      !
          ! Повторяется!           !         !      !      !      !
          ! пока BC=0  !           !         !      !      !      !
          !            !  2 1      !         !      !      !      !
  CPI     ! A-(HL)     !. * * * 1 *!1110 1101!  2   !  4   !  16  !
          ! HL<HL+1    !           !1010 0001!      !      !      !
          ! BC<BC-1    !           !         !      !      !      !
          !            !  2 1      !         !      !      !      !
   CPIR   ! A-(HL)     !. * * * 1 *!1110 1101!  2   !  5   !  21  !Если(BC)=/0
          ! HL<HL+1    !           !1011 0001!      !      !      !и A+/(H)
          ! BC<BC-1    !           !         !  2   !  4   !  16  !Если(BC)=0
          ! Повторяется!           !         !      !      !      !или A=0
          ! пока A=(HL)!           !         !      !      !      !
          ! или BC=0   !           !         !      !      !      !
          !            !  2 1      !         !      !      !      !
  CPD     ! A-(HL)     !. * * * 1 *!1110 1101!  2   !  4   !  16  !
          ! HL<HL-1    !           !1010 1001!      !      !      !
          ! BC<BC-1    !           !         !      !      !      !
          !            !  2 1      !         !      !      !      !
  CPDR    ! A-(HL)     !. * * * 1 *!1110 1101!  2   !  5   !  21  !Если(BC=/0
          ! HL<HL-1    !           !1011 1001!      !      !      !и A=/(HL)
          ! BC<BC-1    !           !         !  2   !  4   !      !Если(BC)=0
          ! Повторяется!           !         !      !      !      !или A=0
          ! пока A=(HL)!           !         !      !      !      !
          ! или BC=0   !           !         !      !      !      !
          !            !           !         !      !      !      !
   Примечания: Флаг P/V равен 0, если BC-1=0, в противном случае P/V=1.
               Флаг Z равен 1, если A=0, в противном случае Z=0.
   Условные обозначения: . - состояние флага не изменяется;
                         0 - флаг сбрасывается;
                         1 - флаг устанавливается;
                         X - флаг неопределен;
                         * - состояние флага зависит от результата операции.


   Группа команд 8-разрядной арифметики и логических команд

-----------------------------------------------------------------------------------
МНЕМОНИКА !СИМВОЛИЧЕСК.!   ФЛАГИ   !    КОД  !ДЛИНА !ЧИСЛО !ЧИСЛО ! ПРИМЕЧАНИЕ
          !  ОПИСАНИЕ  !           !ОПЕРАЦИИ !  В   !МАШИН.!ТАКТОВ!
          !            !-----------!---------!БАЙТАХ!ЦИКЛОВ!      !
          !            ! ! !P! ! ! !         !      !      !      !
          !            !C!Z!V!S!N!H!7654 3210!      !      !      !
----------!------------!-----------!---------!------!------!------!----------------
 ADD A,r  ! A<A+r      !* * V * 0 *!1000 0rrr!  1   !  1   !  4   ! rrr Регистр
 ADD A,n  ! A<A=n      !* * V * 0 *!1100 0110!  2   !  2   !  7   ! 000  B
          !            !           !<---n--->!      !      !      ! 001  C
ADD A,(HL)! A<A+(HL)   !* * V * 0 *!1000 0110!  1   !  2   !  7   ! 010  D
ADD A,(IX+d)A<A+(IX+d) !* * V * 0 *!1101 1101!  3   !  5   !  19  ! 100  E
          !            !           !1000 0110!      !      !      ! 101  H
          !            !           !<---d--->!      !      !      ! 110 (HL)
ADD A,(IY+d)A<A+(IY+d) !* * V * 0 *!1111 1101!  3   !  5   !  19  ! 111  A
          !            !           !1000 0110!      !      !      !
          !            !           !<---d--->!      !      !      !
 ADC A,s  ! A<A+s+CY   !* * V * 0 *!1000 1sss!      !      !      ! s-обознач. один из
 SUB s    ! A<A-s      !* * V * 1 *!1001 0sss!      !      !      ! возможн. способов
 SBC A,s  ! A<A-s-CY   !* * V * 1 *!1001 1sss!      !      !      ! задания значения
 AND s    ! A<A AND s  !0 * V * 0 1!1010 0sss!      !      !      ! операнда аналогично
 OR s     ! A<A OR s   !0 * P * 0 0!1011 0sss!      !      !      ! команде ADD;z,n,
 XOR s    ! A<A XOR s  !0 * P * 0 0!1010 1sss!      !      !      ! (HL),(IX+d),(IY+d).
 CP s     ! A-s        !* * V * 1 *!1011 1sss!      !      !      !
 INC r    ! r<r+1      !. * V * 0 *!00rr r100!  1   !  1   !  4   ! m обозн. один из
 INC (HL) ! (HL)<(HL)+1!. * V * 0 *!0011 0100!  1   !  3   !  11  ! возможн. способов
INC (IX+d)! (IX+d)<    !. * V * 0 *!1101 1101!  3   !  6   !  23  ! задания значения
          !   (IX+d)+1 !           !0011 0100!      !      !      ! операнда аналог.
          !            !           !<---d--->!      !      !      ! команде INC:z,
INC (IY+d)! (IY+d)<    !. * V * 0 *!1111 1101!  3   !  6   !  23  ! (HL),(IX+d),(IY+d)
          !   (IY+d)+1 !           !0011 0100!      !      !      !Формат и коды те же
          !            !           !<---d--->!      !      !      !
 DEC r    ! r<r-1      !. * V * 1 *!000rrr101!      !      !      !
          !            !           !         !      !      !      !

  Примечания: Символ V в графе, соответствующей флагу P/V, указывает,
              что флаг P/V содержит признак переполнения для результата
              данной операции. Аналогично символ P указывает четность;
              V=1 означает переполнение, V=0 означает отсутствие переполнения.
              P=1 означает, что результат четный, P=0 означает, что результат
              нечетный.



   Группа команд 8-разрядной загрузки

-----------------------------------------------------------------------------------
МНЕМОНИКА !СИМВОЛИЧЕСК.!   ФЛАГИ   !    КОД  !ДЛИНА !ЧИСЛО !ЧИСЛО ! ПРИМЕЧАНИЕ
          !  ОПИСАНИЕ  !           !ОПЕРАЦИИ !  В   !МАШИН.!ТАКТОВ!
          !            !-----------!---------!БАЙТАХ!ЦИКЛОВ!      !
          !            ! ! !P! ! ! !         !      !      !      !
          !            !C!Z!V!S!N!H!7654 3210!      !      !      !
----------!------------!-----------!---------!------!------!------!----------------
 LD r,R   ! R<r        !. . . . . .!01rr rRRR!  1   !  1   !  4   ! RRR
 LD r,n   ! r<n        !. . . . . .!00rr r110!  2   !  2   !  7   ! rrr Регистр
          !            !           !<---n--->!      !      !      ! 000  B
 LD r,(HL)! r<(HL)     !. . . . . .!01rr r110!  1   !  2   !  7   ! 001  C
LD r(IX+d)! r<(IX+d)   !. . . . . .!1101 1101!  3   !  5   !  19  ! 010  D
          !            !           !01rr r110!      !      !      ! 011  E
          !            !           !<---d--->!      !      !      ! 100  H
LD r,(IY+d) r<(IY+d)   !. . . . . .!1111 1101!  3   !  5   !  19  ! 101  L
          !            !           !01rr r110!      !      !      ! 111  A
          !            !           !<---d--->!      !      !      !
LD (HL),r ! (HL)<r     !. . . . . .!0111 0rrr!  1   !  2   !  7   !
LD (IX+d),r (IX+d)<r   !. . . . . .!1101 1101!  3   !  5   !  19  !
          !            !           !0111 0rrr!      !      !      !
          !            !           !<---d--->!      !      !      !
LD (IY+d),r (IY+d)<r   !. . . . . .!1111 1101!  3   !  5   !  19  !
          !            !           !0111 0rrr!      !      !      !
          !            !           !<---d--->!      !      !      !
LD (HL),n ! (HL)<n     !. . . . . .!0011 0110!  2   !  3   !  10  !
          !            !           !<---n--->!      !      !      !
LD (IX+d),n (IX+d)<n   !. . . . . .!1101 1101!  4   !  5   !  19  !
          !            !           !0011 0110!      !      !      !
          !            !           !<---d--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD (IY+d),n (IY+d)<n   !. . . . . .!1111 1101!  4   !  5   !  19  !
          !            !           !0011 0110!      !      !      !
          !            !           !<---d--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD A,(BC) ! A<(BC)     !. . . . . .!0000 1010!  1   !  2   !  7   !
LD A,(DE) ! A<(DE)     !. . . . . .!0001 1010!  1   !  2   !  7   !
LD A,(nn) ! A<(nn)     !. . . . . .!0011 1010!  1   !  4   !  13  !
          !            !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD (BC),A ! (BC)<A     !. . . . . .!0000 0010!  1   !  2   !  7   !
LD (DE),A ! (DE)<A     !. . . . . .!0001 0010!  1   !  2   !  7   !
LD (nn),A ! (nn)<A     !. . . . . .!0011 0010!  1   !  4   !  13  !
          !            !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD A,I    ! A<I        !. * F * 0 0!1110 1101!  2   !  2   !  9   !
          !            !           !0101 0111!      !      !      !
LD A,R    ! A<R        !. * F * 0 0!1110 1101!  2   !  2   !  9   !
          !            !           !0101 1111!      !      !      !
LD I,A    ! I<A        !. . . . . .!1110 1101!  2   !  2   !  9   !
          !            !           !0100 0111!      !      !      !
LD R,A    ! R<A        !. . . . . .!1110 1101!  2   !  2   !  9   !
          !            !           !0100 1111!      !      !      !
          !            !           !         !      !      !      !

  Примечания. F обозначает содержимое триггера разрешения прерывания
              F копируется на место флага P/V


  Группа команд 16-разрядной загрузки

-----------------------------------------------------------------------------------
МНЕМОНИКА !СИМВОЛИЧЕСК.!   ФЛАГИ   !    КОД  !ДЛИНА !ЧИСЛО !ЧИСЛО ! ПРИМЕЧАНИЕ
          !  ОПИСАНИЕ  !           !ОПЕРАЦИИ !  В   !МАШИН.!ТАКТОВ!
          !            !-----------!---------!БАЙТАХ!ЦИКЛОВ!      !
          !            ! ! !P! ! ! !         !      !      !      !
          !            !C!Z!V!S!N!H!7654 3210!      !      !      !
----------!------------!-----------!---------!------!------!------!----------------
LD dd,nn  ! dd<nn      !. . . . . .!00dd 0001!  3   !  3   !  10  ! dd Регистр
          !            !           !<---n--->!      !      !      ! 00 BC
          !            !           !<---n--->!      !      !      ! 01 DE
LD IX,nn  ! IX<nn      !. . . . . .!1101 1101!  4   !  4   !  14  ! 10 HL
          !            !           !0010 0001!      !      !      ! 11 SP
          !            !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD IY,nn  ! IY<nn      !. . . . . .!1111 1101!  4   !  4   !  14  !
          !            !           !0010 0001!      !      !      !
          !            !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD HL,(nn)! H<(nn+1)   !. . . . . .!0010 1010!  3   !  5   !  16  !
          ! L<(nn)     !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD dd,(nn)! ddh<(nn+1) !. . . . . .!1110 1101!  4   !  6   !  20  !
          ! ddl<(nn)   !           !01dd 1011!      !      !      !
          !            !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD IX,(nn)! IXh<(nn+1) !. . . . . .!1101 1101!  4   !  6   !  20  !
          ! IXl<(nn)   !           !0010 1010!      !      !      !
          !            !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD IY,(nn)! IYh<(nn+1) !. . . . . .!1111 1101!  4   !  6   !  20  !
          ! IYl<(nn)   !           !0010 1010!      !      !      !
          !            !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD (nn),HL! (nn+1)<H   !. . . . . .!1111 1101!  4   !  5   !  20  !
          ! (nn)<L     !           !0010 1010!      !      !      !
          !            !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD (nn),dd! (nn+1)<ddh !. . . . . .!1110 1101!  4   !  6   !  16  !
          ! (nn)<ddl   !           !01dd 0011!      !      !      !
          !            !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD (nn),IX! (nn+1)<IXh !. . . . . .!1101 1101!  4   !  6   !  20  !
          ! (nn)<IXl   !           !0010 0010!      !      !      !
          !            !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD (nn),IY! (nn+1)<IYh !. . . . . .!1111 1101!  4   !  6   !  20  !
          ! (nn)<IYl   !           !0010 0010!      !      !      !
          !            !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
LD SP,HL  ! SP<HL      !. . . . . .!1111 1001!  1   !  1   !  6   !
LD SP,IX  ! SP<IX      !. . . . . .!1101 1101!  2   !  2   !  10  !
          !            !           !1111 1001!      !      !      !
LD SP,IY  ! SP<IY      !. . . . . .!1111 1101!  2   !  2   !  10  !
          !            !           !1111 1001!      !      !      !   Спаренные
 PUSH qq  ! (SP-2)<qql !. . . . . .!11qq 0101!  1   !  3   !  11  ! qq регистры
          ! (SP-1)<qqh !           !         !      !      !      ! 00 BC
 PUSH IX  ! (SP-2)<IXl !. . . . . .!1101 1101!  2   !  4   !  15  ! 01 DE
          ! (SP-1)<IXh !           !1110 0101!      !      !      ! 10 HL
 PUSH IY  ! (SP-2)<IYl !. . . . . .!1111 1101!  2   !  4   !  15  ! 11 AF
          ! (SP-1)<IYh !           !1110 0101!      !      !      !
 POP qq   ! qqh<(SP-1) !. . . . . .!11qq 0001!  1   !  3   !  10  !
          ! qql<(SP-2) !           !         !      !      !      !
 POP IX   ! IXh<(SP-1) !. . . . . .!1101 1101!  2   !  4   !  14  !
          ! IXl<(SP-2) !           !1110 0001!      !      !      !
 POP IY   ! IYh<(SP-1) !. . . . . .!1111 1101!  2   !  4   !  14  !
          ! IYl<(SP-2) !           !1110 0001!      !      !      !
          !            !           !         !      !      !      !
  Примечание: ddh;qqh - старшие,
              ddl;qql - младшие 8 разрядов пары регистров.
    Например: BCl=C; AFh=A


   Группа арифметических команд общего назначения и команд
   управления центральным процессором.

-----------------------------------------------------------------------------------
МНЕМОНИКА !СИМВОЛИЧЕСК.!   ФЛАГИ   !    КОД  !ДЛИНА !ЧИСЛО !ЧИСЛО ! ПРИМЕЧАНИЕ
          !  ОПИСАНИЕ  !           !ОПЕРАЦИИ !  В   !МАШИН.!ТАКТОВ!
          !            !-----------!---------!БАЙТАХ!ЦИКЛОВ!      !
          !            ! ! !P! ! ! !         !      !      !      !
          !            !C!Z!V!S!N!H!7654 3210!      !      !      !
----------!------------!-----------!---------!------!------!------!----------------
 DAA      !Преобразует !* * P * . *!0010 0111!  1   !  1   !  4   !Преобразовать
          !содержимое  !           !         !      !      !      !содержимое акку-
          !аккумулятора!           !         !      !      !      !мулятора в деся-
          !в упакованный           !         !      !      !      !тичный формат
          !двоично-деся-           !         !      !      !      !
          !тичный формат           !         !      !      !      !
          !предшествует!           !         !      !      !      !
          !команде сло-!           !         !      !      !      !
          !жения или вы-           !         !      !      !      !
          !читания упако-          !         !      !      !      !
          !ванных двоично-         !         !      !      !      !
          !десятичных  !           !         !      !      !      !
          !чисел.      !           !         !      !      !      !
          !   -        !           !         !      !      !      !Преобразовать
 CPL      ! A<A        !. . . . 1 1!0010 1111!  1   !  1   !  4   !содержимое акку-
          !            !           !         !      !      !      !мулятора в обратный
          !            !           !         !      !      !      !код(дополнение до 1)
 NEG      ! A<0-A      !* * V * 1 *!1110 1101!  2   !  2   !  8   !Преобразовать содер-
          !            !           !0100 0100!      !      !      !жимое аккумулятора
          !            !           !         !      !      !      !в дополнительный код
          !    --      !           !         !      !      !      !(дополнение до 2)
 CCF      ! CY<CY      !* . . . 0 X!0011 1111!  1   !  1   !  4   !Инвертировать флаг
          !            !           !         !      !      !      !переноса
 SCF      ! CY<1       !1 . . . 0 0!0011 0111!  1   !  1   !  4   !Установить флаг
          !            !           !         !      !      !      !переноса
 NOP      !Нет операции!. . . . . .!0000 0000!  1   !  1   !  4   !
 HALT     ! Останов ЦП !. . . . . .!0111 0110!  1   !  1   !  4   !
 DI       ! IFF<0      !. . . . . .!1111 0011!  1   !  1   !  4   !
 EI       ! IFF<1      !. . . . . .!1111 1011!  1   !  1   !  4   !
 IM 0     !Устанавлива-!. . . . . .!1110 1101!  2   !  2   !  8   !
          !ется режим  !           !0100 0110!      !      !      !
          !прерываний 0!           !         !      !      !      !
 IM 1     !Устанавлива-!. . . . . .!1110 1101!  2   !  2   !  8   !
          !ется режим  !           !0101 0110!      !      !      !
          !прерываний 1!           !         !      !      !      !
 IM 2     !Устанавлива-!. . . . . .!1110 1101!  2   !  2   !  8   !
          !ется режим  !           !0101 1110!      !      !      !
          !прерываний 2!           !         !      !      !      !
          !            !           !         !      !      !      !

  Примечание: IFF-триггер разрешения прерывания; CY-триггер переноса.


    Группа команд 16-разрядной арифметики

-----------------------------------------------------------------------------------
МНЕМОНИКА !СИМВОЛИЧЕСК.!   ФЛАГИ   !    КОД  !ДЛИНА !ЧИСЛО !ЧИСЛО ! ПРИМЕЧАНИЕ
          !  ОПИСАНИЕ  !           !ОПЕРАЦИИ !  В   !МАШИН.!ТАКТОВ!
          !            !-----------!---------!БАЙТАХ!ЦИКЛОВ!      !
          !            ! ! !P! ! ! !         !      !      !      !
          !            !C!Z!V!S!N!H!7654 3210!      !      !      !
----------!------------!-----------!---------!------!------!------!----------------
ADD HL,ss ! HL<HL+ss   !* . . . 0 X!00ss 1001!  1   !  3   !  11  ! ss Регистр
ADC HL,ss ! HL<HL+ss+CY!* * V * 0 X!1110 1101!  2   !  4   !  15  ! 00  BC
          !            !           !01ss 1010!      !      !      ! 01  DE
SBC HL,ss ! HL<HL-ss-CY!* * V * 1 X!1110 1101!  2   !  4   !  15  ! 10  HL
          !            !           !01ss 0010!      !      !      ! 11  SP
ADD IX,pp ! IX<IX+pp   !* . . . 0 X!1101 1101!  2   !  4   !  15  !
          !            !           !00pp 1001!      !      !      ! pp Регистр
ADD IY,rr ! IY<IY+rr   !* . . . 0 X!1111 1101!  2   !  4   !  15  ! 00  BC
          !            !           !00rr 1001!      !      !      ! 01  DE
 INC ss   ! ss<ss+1    !. . . . . .!00ss 0011!  1   !  1   !  6   ! 10  IX
 INC IX   ! IX<IX+1    !. . . . . .!1101 1101!  2   !  2   !  10  ! 11  SP
          !            !           !0010 0011!      !      !      !
 INC IY   ! IY<IY+1    !. . . . . .!1111 1101!  2   !  2   !  10  ! rr Регистр
          !            !           !0010 0011!      !      !      ! 00  BC
 DEC ss   ! ss<ss-1    !. . . . . .!00ss 1011!  1   !  1   !  6   ! 01  DE
 DEC IX   ! IX<IX-1    !. . . . . .!1101 1101!  2   !  2   !  10  ! 10  IY
          !            !           !0010 1011!      !      !      ! 11  SP
 DEC IY   ! IY<IY-1    !. . . . . .!1111 1101!  2   !  2   !  10  !
          !            !           !0010 1011!      !      !      !
          !            !           !         !      !      !      !



    Группа команд сдвига и циклического сдвига

-----------------------------------------------------------------------------------
МНЕМОНИКА !СИМВОЛИЧЕСК.!   ФЛАГИ   !    КОД  !ДЛИНА !ЧИСЛО !ЧИСЛО ! ПРИМЕЧАНИЕ
          !  ОПИСАНИЕ  !           !ОПЕРАЦИИ !  В   !МАШИН.!ТАКТОВ!
          !            !-----------!---------!БАЙТАХ!ЦИКЛОВ!      !
          !            ! ! !P! ! ! !         !      !      !      !
          !            !C!Z!V!S!N!H!7654 3210!      !      !      !
----------!------------!-----------!---------!------!------!------!----------------
 RLCA     !            !* . . . 0 0!0000 0111!  1   !  1   !  4   !Циклический сдвиг
          !            !           !         !      !      !      !содержимого
          !            !           !         !      !      !      !акк. влево
 RLA      !            !* . . . 0 0!0001 0111!  1   !  1   !  4   !Циклический сдвиг
          !            !           !         !      !      !      !содержимого
          !            !           !         !      !      !      !акк. влево
          !            !           !         !      !      !      !с переносом
 RRCA     !            !* . . . 0 0!0000 1111!  1   !  1   !  4   !Циклический сдвиг
          !            !           !         !      !      !      !содержимого акк.
          !            !           !         !      !      !      !вправо
 RRA      !            !* . . . 0 0!0001 1111!  1   !  1   !  4   !Циклический сдвиг
          !            !           !         !      !      !      !содержимого акк.
          !            !           !         !      !      !      !вправо
          !            !           !         !      !      !      !с переносом
 RLC r    !            !* * P * 0 0!1100 1011!  2   !  2   !  8   !Циклический сдвиг
          !            !           !0000 0rrr!      !      !      !содержимого
 RLC (HL) !            !* * P * 0 0!1100 1011!  2   !  4   !  15  !регистра влево
          !            !           !0000 0110!      !      !      ! rrr Регистр
RLC (IX+d)!            !* * P * 0 0!1101 1101!  4   !  6   !  23  ! 000  B
          !            !           !1100 1011!      !      !      ! 001  C
          !            !           !<---d--->!      !      !      ! 010  D
          !            !           !0000 0110!      !      !      ! 011  E
RLC (IY+d)!            !* * P * 0 0!1111 1101!  4   !  6   !  23  ! 100  H
          !            !           !1100 1011!      !      !      ! 101  L
          !            !           !<---d--->!      !      !      ! 111  A
          !            !           !0000 0110!      !      !      !
 RL m     !            !* * P * 0 0!  01 0   !      !      !      !Формат команды и
          !            !           !         !      !      !      !коды состояния
 RRC m    !            !* * P * 0 0!  00 1   !      !      !      !те же, что и у
          !            !           !         !      !      !      !команды RLC m
 RR m     !            !* * P * 0 0!  01 1   !      !      !      !Новый код операции
          !            !           !         !      !      !      !получается заменой
 SLA m    !            !* * P * 0 0!  10 0   !      !      !      !000 в команде
          !            !           !         !      !      !      ! RLC m
 SRA m    !            !* * P * 0 0!  10 1   !      !      !      !на указанный код
          !            !           !         !      !      !      !
 SRL m    !            !* * P * 0 0!  11 1   !      !      !      !
          !            !           !         !      !      !      !
 RLD      !            !. * P * 0 0!1110 1101!  2   !  5   !  18  !Левый и правый
          !            !           !0110 1111!      !      !      !арифметические
          !            !           !         !      !      !      !циклические пере-
          !            !           !         !      !      !      !носы из акк.
          !            !           !         !      !      !      !в память (HL)
 RRD      !            !. * P * 0 0!1110 1101!  2   !  5   !  18  !Содержимое старшей
          !            !           !0110 0111!      !      !      !половины аккумуля-
          !            !           !         !      !      !      !тора не изменяется
          !            !           !         !      !      !      !


    Группа команд работы с отдельными разрядами

-----------------------------------------------------------------------------------
МНЕМОНИКА !СИМВОЛИЧЕСК.!   ФЛАГИ   !    КОД  !ДЛИНА !ЧИСЛО !ЧИСЛО ! ПРИМЕЧАНИЕ
          !  ОПИСАНИЕ  !           !ОПЕРАЦИИ !  В   !МАШИН.!ТАКТОВ!
          !            !-----------!---------!БАЙТАХ!ЦИКЛОВ!      !
          !            ! ! !P! ! ! !         !      !      !      !
          !            !C!Z!V!S!N!H!7654 3210!      !      !      !
----------!------------!-----------!---------!------!------!------!----------------
          !   -        !           !         !      !      !      ! rrr Регистр
 BIT b,r  ! z<rb       !. * X X 0 1!1100 1011!  2   !  2   !  8   ! 000  B
          !    --      !           !01bb brrr!      !      !      ! 001  C
BIT b,(HL)! z<(HL)b    !. * X X 0 1!1100 1011!  2   !  3   !  12  ! 010  D
          !    ----    !           !01bb b110!      !      !      ! 011  E
BIT b,(IX+d)z<(IX+d)   !. * X X 0 1!1101 1101!  4   !  5   !  20  ! 100  H
          !            !           !1100 1011!      !      !      ! 101  L
          !            !           !<---d--->!      !      !      ! 111  A
          !    ----    !           !01bb b110!      !      !      !
BIT b,(IY+d)z<(IY+d)   !. * X X 0 1!1111 1101!  4   !  5   !  20  !
          !            !           !1100 1011!      !      !      !  Проверяемые
          !            !           !<---d--->!      !      !      ! bbb биты
          !            !           !01bb b110!      !      !      ! 000  0
 SET b,r  ! rb<1       !. . . . . .!1100 1011!  2   !  2   !  8   ! 001  1
          !            !           !11bb brrr!      !      !      ! 010  2
SET b,(HL)! (HL)b<1    !. . . . . .!1100 1011!  2   !  4   !  15  ! 011  3
          !            !           !11bb b110!      !      !      ! 100  4
SET b,(IX+d)(IX+d)<1   !. . . . . .!1101 1101!  4   !  6   !  23  ! 101  5
          !            !           !1100 1011!      !      !      ! 110  6
          !            !           !<---d--->!      !      !      ! 111  7
          !            !           !11bb b110!      !      !      !
SET b,(IY+d)(IY+d)<1   !. . . . . .!1111 1101!  4   !  6   !  23  !
          !            !           !1100 1011!      !      !      !
          !            !           !<---d--->!      !      !      !
          !            !           !11bb b110!      !      !      !
 RES b,m  ! sb<0       !           !10       !      !      !      !Для получения нового
          ! m=r(HL),   !           !         !      !      !      !кода операции следует
          ! (IX+d)     !           !         !      !      !      !заменить 11 в команде
          ! (IY+d)     !           !         !      !      !      !SET b,m на 10.
          !            !           !         !      !      !      !Флаги и временные
          !            !           !         !      !      !      ! характеристики
          !            !           !         !      !      !      !как у команды SET
  Примечания. sb указывает на бит b (0-7) ячейки s.


    Команды обращения к подпрограмме

-----------------------------------------------------------------------------------
МНЕМОНИКА !СИМВОЛИЧЕСК.!   ФЛАГИ   !    КОД  !ДЛИНА !ЧИСЛО !ЧИСЛО ! ПРИМЕЧАНИЕ
          !  ОПИСАНИЕ  !           !ОПЕРАЦИИ !  В   !МАШИН.!ТАКТОВ!
          !            !-----------!---------!БАЙТАХ!ЦИКЛОВ!      !
          !            ! ! !P! ! ! !         !      !      !      !
          !            !C!Z!V!S!N!H!7654 3210!      !      !      !
----------!------------!-----------!---------!------!------!------!----------------
 CALL nn  ! (SP-1)<PCh !. . . . . .!1100 1101!  3   !  5   !  17  !
          ! (SP-2)<PCl !           !<---n--->!      !      !      !
          ! PC<nn      !           !<---n--->!      !      !      !
CALL cc,nn!Если условие!. . . . . .!11cc c100!  3   !  3   !  10  !Если cc ложно
          !cc ложно,   !           !<---n--->!      !      !      !
          !продолжить  !           !<---n--->!  3   !  5   !  17  !Если cc истинно
          !программу,  !           !         !      !      !      !
          !в противном !           !         !      !      !      !
          !случае - так!           !         !      !      !      !
          !же, как и для           !         !      !      !      !
          !CALL nn     !           !         !      !      !      !
 RET      ! PCl<(SP)   !. . . . . .!1100 1001!  1   !  3   !  10  !
          ! PCh<(SP+1) !           !         !      !      !      !
 RET cc   !Если условие!. . . . . .!11cc c000!  1   !  1   !  5   !Если cc ложно
          !cc ложно,   !           !         !      !      !      !
          !продолжить  !           !         !  1   !  3   !  11  !Если cc истинно
          !программу, в!           !         !      !      !      ! сc Условие
          !противном   !           !         !      !      !      ! 000  NZ не нуль
          !случае - так!           !         !      !      !      ! 001  Z  нуль
          !же, как и   !           !         !      !      !      ! 010  NC нет переноса
          !для RET     !           !         !      !      !      ! 011  C  перенос
 RETI     !Возврат после. . . . . .!1110 1101!  2   !  4   !  14  ! 100  PO нечетность
          !прерывания  !           !0100 1101!      !      !      ! 101  PE четность
 RETN     !Возврат после. . . . . .!1110 1101!  2   !  4   !  14  ! 110  P  знак положит.
          !немаскируем.!           !0100 0101!      !      !      ! 111  M  знак отрицат.
          !прерывания  !           !         !      !      !      !
 RST p    ! (SP-1)<PCh !. . . . . .!11tt t111!  1   !  3   !  11  ! ttt  ppp
          ! (SP-2)<PCl !           !         !      !      !      ! 000  00H
          ! PCh<0      !           !         !      !      !      ! 001  08H
          ! PCl<p      !           !         !      !      !      ! 010  10H
          !            !           !         !      !      !      ! 011  18H
          !            !           !         !      !      !      ! 100  20H
          !            !           !         !      !      !      ! 101  28H
          !            !           !         !      !      !      ! 110  30H
          !            !           !         !      !      !      ! 111  38H
 JP nn    ! PC<nn      !. . . . . .!1100 0011!  3   !  3   !  10  !
          !            !           !<---n--->!      !      !      !
          !            !           !<---n--->!      !      !      !
 JP cc,nn !Если условие!. . . . . .!11cc c010!  3   !  3   !  10  !
          !cc истинно  !           !<---n--->!      !      !      !
          !PC<nn, иначе!           !<---N--->!      !      !      !
          !продолжить  !           !         !      !      !      !
          !программу   !           !         !      !      !      !
 JR e     ! PC<PC+e    !. . . . . .!0001 1000!  2   !  3   !  12  !
          !            !           !<--e-2-->!      !      !      !
 JR C,e   !Если C=0,   !. . . . . .!0011 1000!  2   !  2   !  7   !Если условие не выполнено
          !продолжить  !           !<--e-2-->!      !      !      !
          !программу.  !           !         !  2   !  3   !  12  !Если условие выполнено
          !Если C=1,   !           !         !      !      !      !
          ! PC<PC+e    !           !         !      !      !      !
 JR NC,e  !ЕслиC=1,    !. . . . . .!0011 0000!  2   !  2   !  7   !Если условие не выполнено
          !продолжить  !           !<--e-2-->!      !      !      !
          !программу.  !           !         !  2   !  3   !  12  !Если условие выполнено
          !Если C=0,   !           !         !      !      !      !
          ! PC<PC+e    !           !         !      !      !      !
 JR Z,e   !Если Z=0,   !. . . . . .!0010 1000!  2   !  2   !  7   !Если условие не выполнено
          !продолжить  !           !<--e-2-->!      !      !      !
          !программу.  !           !         !  2   !  3   !  12  !Если условие выполнено
          !Если Z=1,   !           !         !      !      !      !
          !PC<PC+e     !           !         !      !      !      !
 JR NZ,e  !Если Z=1,   !. . . . . .!0010 0000!  2   !  2   !   7  !Если условие не выполнено
          !продолжить  !           !<--e-2-->!      !      !      !
          !программу.  !           !         !  2   !  3   !  12  !Если условие выполнено
          !Если Z=0,   !           !         !      !      !      !
          ! PC<PC+e    !           !         !      !      !      !
 JP (HL)  ! PC<HL      !. . . . . .!1110 1001!  1   !  1   !  4   !
 JP (IX)  ! PC<IX      !. . . . . .!1101 1101!  2   !  2   !  8   !
          !            !           !1110 1001!      !      !      !
 JP (IY)  ! PC<IY      !. . . . . .!1111 1101!  2   !  2   !  8   !
          !            !           !1110 1001!      !      !      !
 DJNZ,e   ! B<B-1      !. . . . . .!0001 0000!  2   !  2   !  8   !Если B=0
          !Если B=0,   !           !<--e-2-->!      !      !      !
          !продолжить  !           !         !  2   !  3   !  13  !Если B=/0
          !программу.  !           !         !      !      !      !
          !Если B=/0,  !           !         !      !      !      !
          ! PC<PC+e    !           !         !      !      !      !
          !            !           !         !      !      !      !


    Команды ввода-вывода

-----------------------------------------------------------------------------------
МНЕМОНИКА !СИМВОЛИЧЕСК.!   ФЛАГИ   !    КОД  !ДЛИНА !ЧИСЛО !ЧИСЛО ! ПРИМЕЧАНИЕ
          !  ОПИСАНИЕ  !           !ОПЕРАЦИИ !  В   !МАШИН.!ТАКТОВ!
          !            !-----------!---------!БАЙТАХ!ЦИКЛОВ!      !
          !            ! ! !P! ! ! !         !      !      !      !
          !            !C!Z!V!S!N!H!7654 3210!      !      !      !
----------!------------!-----------!---------!------!------!------!----------------
 IN A,(n) ! A<(n)      !. . . . . .!1101 1011!  2   !  3   !  11  !n в A0-A7,
          !            !           !<---n--->!      !      !      !Acc в A8-A15
 IN r,(C) ! r<(C)      !. * P * 0 *!1110 1101!  2   !  3   !  12  !C в A0-A7,
          ! r=110      !           !01rr r000!      !      !      !B в A8-A15
          !Если r=110  !           !         !      !      !      !
          !изменяются  !           !         !      !      !      !
          !только флаги!  1        !         !      !      !      !
 INI      ! (HL)<(C)   !X * X X 1 X!1110 1101!  2   !  4   !  16  !C в A0-A7,
          ! B<B-1      !           !1010 0010!      !      !      !B в A8-A18
          ! HL<HL+1    !           !         !      !      !      !
 INIR     ! (HL)<(C)   !X 1 X X 1 X!1110 1101!  2   !  5   !  21  !
          ! B<B-1      !           !1011 0010!      ! Если !      !
          ! HL<HL+1    !           !         !      ! B=0  !      !
          !Повторить   !           !         !  2   !  4   !  16  !
          !пока B=0    !           !         !      ! Если !      !
          !            !  1        !         !      ! B=0  !      !
 IND      ! (HL)<(C)   !X * X X 1 X!1110 1101!  2   !  4   !  16  !
          ! B<B-1      !           !1010 1010!      !      !      !
          ! HL<HL-1    !           !         !      !      !      !
 INDR     ! (HL)<(C)   !X 1 X X 1 X!1110 1101!  2   !  5   !  21  !
          ! B<B-1      !           !1011 1010!      ! Если !      !
          ! HL<HL-1    !           !         !      ! B=/0 !      !
          !            !           !         !  2   !  4   !  16  !
          !            !           !         !      ! Если !      !
          ! B=0        !           !         !      ! B=0  !      !
OUT (n),A ! (n)<A      !. . . . . .!1101 0011!  2   !  3   !  11  !
          !            !           !<---n--->!      !      !      !
OUT (C),r ! (C)<r      !. . . . . .!1110 1101!  2   !  3   !  12  !
          !            !           !01rr r001!      !      !      !
          !            !  1        !         !      !      !      !
 OUTI     ! (C)<(HL)   !X * X X 1 X!1110 1101!  2   !  4   !  16  !
          ! B<B-1      !           !1010 0011!      !      !      !
          ! HL<HL+1    !           !         !      !      !      !
 OTIR     ! (C)<(HL)   !X 1 X X 1 X!1110 1101!  2   !  5   !  21  !
          ! B<B-1      !           !1011 0011!      ! Если !      !
          ! HL<HL+1    !           !         !      ! B=/0 !      !
          !            !           !         !  2   !  4   !  16  !
          !            !           !         !      ! Если !      !
          ! B=0        !  1        !         !      ! B=0  !      !
 OUTD     ! (C)<(HL)   !X * X X 1 X!1110 1101!  2   !  4   !  16  !
          ! B<B-1      !           !1010 1011!      !      !      !
          ! HL<HL-1    !           !         !      !      !      !
 OTDR     ! (C)<(HL)   !X 1 X X 1 X!1110 1101!  2   !  5   !  21  !
          ! B<B-1      !           !1011 1011!      ! Если !      !
          ! HL<HL-1    !           !         !      ! B=/0 !      !
          !Повтор.,пока!           !         !  2   !  4   !  16  !
          ! B=0        !           !         !      !      !      !
          !            !           !         !      !      !      !

   Примечание: Если результат операции B-1=0 устанавливается флаг Z,
               иначе он сбрасывается

  лея
Пpиложение C  Функции BDOS
 try again or ESC to abort
 ЗБВГДЕ